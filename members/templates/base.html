<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#0f172a">
    <title>{% block title %}Gun Club System{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Sarabun', sans-serif; }
        .input-field { @apply w-full border border-slate-300 rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition; }
        .btn-primary { @apply bg-amber-600 hover:bg-amber-700 text-white font-medium px-5 py-2.5 rounded-lg transition shadow-sm; }
        .btn-secondary { @apply bg-slate-600 hover:bg-slate-700 text-white font-medium px-5 py-2.5 rounded-lg transition; }
    </style>
</head>

<body class="bg-slate-50 text-slate-800 antialiased">

<!-- Mobile menu overlay -->
<div id="sidebar-overlay" class="fixed inset-0 bg-black/50 z-40 md:hidden hidden" onclick="toggleSidebar()"></div>

<!-- Mobile header -->
<header class="md:hidden fixed top-0 left-0 right-0 h-14 bg-slate-900 text-white flex items-center justify-between px-4 z-30 shadow-lg">
    <button onclick="toggleSidebar()" class="p-2 rounded-lg hover:bg-slate-700" aria-label="เมนู">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
    </button>
    <span class="font-bold text-lg">Gun Club</span>
    <div class="w-10"></div>
</header>

<!-- Sidebar -->
<aside id="sidebar" class="fixed left-0 top-0 h-full w-64 bg-slate-900 text-white z-50 flex flex-col shadow-xl md:shadow-none transition-transform duration-300 ease-out -translate-x-full md:translate-x-0">
    <div class="p-5 pt-8 md:pt-5">
        <div class="text-xl font-bold flex items-center gap-2">
            <span class="w-8 h-8 rounded-lg bg-amber-500 flex items-center justify-center text-slate-900 text-sm">GC</span>
            Gun Club
        </div>
    </div>

    <nav class="flex-1 px-3 pb-6 space-y-1 overflow-y-auto">
        <a href="{% url 'staff_dashboard' %}"
           class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition
           {% if request.resolver_match.url_name == 'staff_dashboard' %}bg-amber-500 text-slate-900{% else %}hover:bg-slate-700 text-slate-200{% endif %}">
            <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"/></svg>
            แดชบอร์ด
        </a>

        <a href="{% url 'member_list' %}"
           class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition
           {% if request.resolver_match.url_name == 'member_list' %}bg-amber-500 text-slate-900{% else %}hover:bg-slate-700 text-slate-200{% endif %}">
            <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"/></svg>
            รายชื่อสมาชิก
        </a>

        <a href="{% url 'add_member' %}"
           class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition
           {% if request.resolver_match.url_name == 'add_member' %}bg-amber-500 text-slate-900{% else %}hover:bg-slate-700 text-slate-200{% endif %}">
            <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"/></svg>
            เพิ่มสมาชิก
        </a>

        {% if user.member.role == "COMMITTEE" or user.member.role == "PRESIDENT" %}
        <a href="{% url 'staff_register' %}"
           class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition
           {% if request.resolver_match.url_name == 'staff_register' %}bg-amber-500 text-slate-900{% else %}hover:bg-slate-700 text-slate-200{% endif %}">
            <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/></svg>
            สร้าง Staff
        </a>
        {% endif %}

        <hr class="border-slate-700 my-4">

        <a href="{% url 'my_card' %}"
           class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium hover:bg-slate-700 text-slate-200 transition">
            <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"/></svg>
            บัตรของฉัน
        </a>

        <a href="{% url 'staff_logout' %}"
           class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium hover:bg-red-600 text-red-100 transition">
            <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/></svg>
            ออกจากระบบ
        </a>
    </nav>
</aside>

<!-- Main content -->
<main class="min-h-screen pt-14 md:pt-8 md:pl-64 pb-8">
        <div class="p-4 sm:p-6 lg:p-8 max-w-7xl mx-auto">
            {% if messages %}
                {% for message in messages %}
                    <div class="mb-4 p-4 rounded-xl {% if message.tags == 'error' %}bg-red-50 text-red-800 border border-red-200{% else %}bg-emerald-50 text-emerald-800 border border-emerald-200{% endif %}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
            {% block content %}
            {% endblock %}
        </div>
</main>

<script>
function toggleSidebar() {
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('sidebar-overlay');
    sidebar.classList.toggle('-translate-x-full');
    overlay.classList.toggle('hidden');
    document.body.classList.toggle('overflow-hidden', !overlay.classList.contains('hidden'));
}
</script>
{% block extra_js %}{% endblock %}
</body>
</html>
