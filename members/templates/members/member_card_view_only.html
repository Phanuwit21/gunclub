{% load i18n %}{% load static %}
<!DOCTYPE html>
<html lang="{{ request.LANGUAGE_CODE|default:'th' }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#0f172a">
    <link rel="icon" type="image/jpeg" href="{% static 'images/logo.jpg' %}">
    <title>{% trans "บัตรสมาชิก" %} — {{ member.member_id }}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Sarabun', sans-serif; }
        .card-container { perspective: 1000px; }
        .card {
            width: min(400px, calc(100vw - 2rem));
            height: 240px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.7s ease;
            cursor: pointer;
        }
        .card.flipped { transform: rotateY(180deg); }
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 1rem;
        }
        .card-back { transform: rotateY(180deg); }
    </style>
</head>

<body class="min-h-screen flex flex-col items-center justify-center p-4 bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800">

    <div class="card-container w-full max-w-sm flex justify-center"
    onclick="this.querySelector('.card').classList.toggle('flipped')">

   <div class="card shadow-xl rounded-2xl bg-transparent">

       <!-- ================= FRONT ================= -->
       <div class="card-face bg-white rounded-2xl overflow-hidden flex flex-col">

           <!-- Header with Logo -->
           <div class="h-10 bg-gradient-to-r from-slate-800 to-slate-700 flex items-center justify-between px-3">
               <div class="flex items-center gap-2">
                   <img src="{% static 'images/logo.jpg' %}" alt="Logo" class="h-6 w-auto rounded">
                   <span class="font-semibold tracking-wide text-[11px] text-white">
                       CHAING MAI IPSC SHOOTING CLUB MEMBERSHIP
                   </span>
               </div>
               <span class="px-2 py-0.5 rounded-full text-[10px] font-semibold bg-slate-600 text-white">
                   {{ member.get_role_display }}
               </span>
           </div>

           <!-- Content -->
           <div class="flex-1 flex p-3 gap-3">

               <!-- Photo -->
               <div class="flex-shrink-0">
                   {% if member.photo %}
                       <img src="{{ member.photo.url }}"
                            class="w-20 h-28 sm:w-24 sm:h-32 object-cover rounded-xl border border-slate-200"
                            alt="รูปสมาชิก">
                   {% else %}
                       <div class="w-20 h-28 sm:w-24 sm:h-32 bg-slate-200 rounded-xl flex items-center justify-center text-xs text-slate-500">
                           No Photo
                       </div>
                   {% endif %}
               </div>

               <!-- Info -->
               <div class="flex-1 min-w-0 text-[11px] leading-snug">

                   <div class="font-bold text-sm truncate">
                       {{ member.first_name }} {{ member.last_name }}
                   </div>

                   <div class="text-slate-500 text-[10px] truncate">
                       {{ member.first_name_en }} {{ member.last_name_en }}
                   </div>

                   <div class="mt-1">
                       {% trans "ชื่อเล่น" %}:
                       <span class="font-medium">
                           {{ member.nickname|default:"—" }}
                       </span>
                   </div>

                   <div class="mt-1 font-mono font-semibold text-[11px]">
                       ID: {{ member.member_id }}
                   </div>

                   <div class="mt-1 grid grid-cols-2 gap-x-2 gap-y-0.5">
                       <div>
                           {% trans "สถานะ" %}:
                           <span class="text-slate-700 font-semibold">
                               {{ member.status }}
                           </span>
                       </div>

                       <div>
                           {% trans "กรุ๊ปเลือด" %}: {{ member.blood_group|default:"—" }}
                       </div>

                       <div>
                           {% trans "โทร" %}: {{ member.phone|default:"—" }}
                       </div>

                       <div>
                           {% trans "หมดอายุ" %}: {{ member.expire_date }}
                       </div>

                   </div>
                   <div>
                    {% trans "ที่อยู่" %}: {{ member.address|default:"—" }}
                   </div>
               </div>
           </div>
       </div>

       <!-- ================= BACK ================= -->
       <div class="card-face card-back bg-slate-900 text-white p-4 rounded-2xl flex flex-col justify-between">

           <div class="text-center text-[11px]">
               <div class="font-semibold text-sm">
                   CHAING MAI IPSC SHOOTING CLUB Membership Card
               </div>

               <div class="text-[10px] text-slate-300 mt-1">
                   {% trans "หากพบเจอบัตรนี้" %}
               </div>

               <div class="text-[11px] font-medium mt-1">
                   {% trans "กรุณาส่งคืนได้ที่ ชมรมกีฬายิงปืนรณยุทธจังหวัดเชียงใหม่ %}
               </div>

               <div class="text-[10px] text-slate-300 mt-1">
                   {% trans "ติดต่อ" %}: 0840403411
               </div>
           </div>

           <div class="flex justify-center mt-2">
               {% if qr_image %}
               <img src="{{ qr_image }}" alt="QR Code"
                    class="w-20 h-20 sm:w-24 sm:h-24 bg-white p-1 rounded-lg">
               {% else %}
               <img src="https://api.qrserver.com/v1/create-qr-code/?size=120x120&data={{ qr_fallback_url|urlencode }}"
                    alt="QR Code"
                    class="w-20 h-20 sm:w-24 sm:h-24 bg-white p-1 rounded-lg">
               {% endif %}
           </div>

           <div class="text-[9px] text-slate-400 text-center">
               {% trans "บัตรนี้เป็นทรัพย์สินของ Gun Club ห้ามใช้ในทางมิชอบ" %}
           </div>

       </div>

   </div>
</div>

<p class="mt-6 text-center text-slate-500 text-sm">
   {% trans "แตะเพื่อพลิกบัตร (ด้านหน้า/ด้านหลัง)" %}
</p>
</body>
</html>
